"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(k){var P=this.$parent,S=this.fixedType,e=this.fixedColumn,W=this.tableColumn,E=this.footerData,L=P.$listeners,l=P.footerRowClassName,q=P.footerCellClassName,t=P.footerRowStyle,A=P.footerCellStyle,D=P.footerAlign,F=P.footerSpanMethod,O=P.align,o=P.tableWidth,r=P.scrollbarWidth,n=P.scrollbarHeight,i=P.scrollXLoad,c=P.scrollXStore,X=P.cellOffsetWidth,M=P.showOverflow,N=P.overflowX,R=P.getColumnMapIndex;return S&&M?o=(W=e).reduce(function(e,l){return e+l.renderWidth},0):i&&(S&&(W=e),o=W.reduce(function(e,l){return e+l.renderWidth},0)),k("div",{class:["vxe-table--footer-wrapper",S?"fixed--".concat(S,"-wrapper"):"footer--wrapper"],style:{"margin-top":"".concat(-n-1,"px")},on:{scroll:this.scrollEvent}},[!S&&i?k("div",{class:["vxe-body--x-space"],style:{width:"".concat(P.tableWidth,"px")}}):null,k("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===o?o:"".concat(o+r,"px"),"margin-left":S?null:"".concat(c.leftSpaceWidth,"px")}},[k("colgroup",W.map(function(e,l){return k("col",{attrs:{name:e.id},style:{width:"".concat(e.renderWidth,"px")},key:l})}).concat([k("col",{attrs:{name:"col_gutter"},style:{width:"".concat(r,"px")}})])),k("tfoot",E.map(function(C,U){return k("tr",{class:["vxe-footer--row",l?_xeUtils.default.isFunction(l)?l({$table:P,$rowIndex:U,fixed:S}):l:""],style:t?_xeUtils.default.isFunction(t)?t({$table:P,$rowIndex:U,fixed:S}):t:null},W.map(function(l,t){var e,o=l.showOverflow,r=l.renderWidth,n=l.columnKey,i=l.footerAlign,c=l.align,a=l.footerClassName,d=l.children&&l.children.length,s=S?l.fixed!==S&&!d:l.fixed&&N,u=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?M:o,f=i||c||D||O,x="title"===u,p=!0===u||"tooltip"===u,m=x||p||"ellipsis"===u,h={"data-colid":l.id},y={},v=R(l),b={$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S};if((x||p)&&(y.mouseenter=function(e){x?_tools.DomTools.updateCellTitle(e):p&&P.triggerFooterTooltipEvent(e,{$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S})}),p&&(y.mouseleave=function(e){p&&P.handleTargetLeaveEvent(e)}),L["header-cell-click"]&&(y.click=function(e){_tools.UtilTools.emitEvent(P,"header-cell-click",[{$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S,cell:e.currentTarget},e])}),L["header-cell-dblclick"]&&(y.dblclick=function(e){_tools.UtilTools.emitEvent(P,"header-cell-dblclick",[{$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S,cell:e.currentTarget},e])}),F){var $=F({$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S,data:E})||{},_=$.rowspan,w=void 0===_?1:_,g=$.colspan,I=void 0===g?1:g;if(!w||!I)return null;h.rowspan=w,h.colspan=I}var T="seq"===l.type||"index"===l.type?"seq":l.type;return k("td",{class:["vxe-footer--column",l.id,(_defineProperty(e={},"col--".concat(f),f),_defineProperty(e,"col--".concat(T),T),_defineProperty(e,"col--last",t===W.length-1),_defineProperty(e,"fixed--hidden",s),_defineProperty(e,"col--ellipsis",m),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),_tools.UtilTools.getClass(a,b),_tools.UtilTools.getClass(q,b)],attrs:h,style:A?_xeUtils.default.isFunction(A)?A({$table:P,$rowIndex:U,column:l,columnIndex:v,$columnIndex:t,fixed:S}):A:null,on:y,key:n||(P.columnKey?l.id:v)},[k("div",{class:"vxe-cell",style:{width:m?"".concat(r-X,"px"):null}},_tools.UtilTools.formatText(C[P.tableColumn.indexOf(l)],1))])}).concat([k("td",{class:["col--gutter"],style:{width:"".concat(r,"px")}})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=o.tableHeader,c=i?i.$el:null,a=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft;l.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),a&&(a.scrollLeft=d),r&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:a.scrollTop,scrollLeft:d,$table:l},e])}}};exports.default=_default;