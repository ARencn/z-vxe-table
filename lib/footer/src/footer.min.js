"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(k){var F=this.$parent,S=this.fixedType,e=this.fixedColumn,W=this.tableColumn,E=this.footerData,L=F.$listeners,t=F.id,l=F.footerRowClassName,q=F.footerCellClassName,o=F.footerRowStyle,A=F.footerCellStyle,D=F.footerAlign,O=F.footerSpanMethod,X=F.align,r=F.tableWidth,n=F.scrollbarWidth,i=F.scrollbarHeight,a=F.scrollXLoad,c=F.scrollXStore,N=F.cellOffsetWidth,R=F.showFooterOverflow,M=F.currentColumn,j=F.overflowX,H=F.getColumnIndex;return S&&R&&!O?r=(W=e).reduce(function(e,t){return e+t.renderWidth},0):a&&(S&&!O&&(W=e),r=W.reduce(function(e,t){return e+t.renderWidth},0)),k("div",{class:["vxe-table--footer-wrapper",S?"fixed--".concat(S,"-wrapper"):"footer--wrapper"],attrs:{"data-tid":t},style:{"margin-top":"".concat(-i,"px")},on:{scroll:this.scrollEvent}},[!S&&a?k("div",{class:["vxe-body--x-space"],style:{width:"".concat(F.tableWidth,"px")}}):null,k("table",{class:"vxe-table--footer",attrs:{"data-tid":t,cellspacing:0,cellpadding:0,border:0},style:{width:null===r?r:"".concat(r+n,"px"),"margin-left":S?null:"".concat(c.leftSpaceWidth,"px")}},[k("colgroup",W.map(function(e,t){return k("col",{attrs:{name:e.id},style:{width:"".concat(e.renderWidth,"px")},key:t})}).concat(n?[k("col",{attrs:{name:"col_gutter"},style:{width:"".concat(n,"px")}})]:[])),k("tfoot",E.map(function(U,P){return k("tr",{class:["vxe-footer--row",l?_xeUtils.default.isFunction(l)?l({$table:F,$rowIndex:P,fixed:S}):l:""],style:o?_xeUtils.default.isFunction(o)?o({$table:F,$rowIndex:P,fixed:S}):o:null},W.map(function(t,l){var e,o=t.showFooterOverflow,r=t.renderWidth,n=t.columnKey,i=t.footerAlign,a=t.align,c=t.footerClassName,d=t.children&&t.children.length,s=S?t.fixed!==S&&!d:t.fixed&&j,u=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?R:o,f=i||a||D||X,x="title"===u,p=!0===u||"tooltip"===u,m=x||p||"ellipsis"===u,h={"data-colid":t.id},y={},v=H(t),b=F.tableColumn.indexOf(t),_={$table:F,$rowIndex:P,column:t,columnIndex:v,$columnIndex:l,itemIndex:b,items:U,fixed:S,data:E};if((x||p)&&(y.mouseenter=function(e){x?_tools.DomTools.updateCellTitle(e):p&&F.triggerFooterTooltipEvent(e,{$table:F,$rowIndex:P,column:t,columnIndex:v,$columnIndex:l,itemIndex:b,items:U,fixed:S,data:E,cell:e.currentTarget})}),p&&(y.mouseleave=function(e){p&&F.handleTargetLeaveEvent(e)}),L["header-cell-click"]&&(y.click=function(e){_tools.UtilTools.emitEvent(F,"header-cell-click",[{$table:F,$rowIndex:P,column:t,columnIndex:v,$columnIndex:l,itemIndex:b,items:U,fixed:S,data:E,cell:e.currentTarget},e])}),L["header-cell-dblclick"]&&(y.dblclick=function(e){_tools.UtilTools.emitEvent(F,"header-cell-dblclick",[{$table:F,$rowIndex:P,column:t,columnIndex:v,$columnIndex:l,itemIndex:b,items:U,fixed:S,data:E,cell:e.currentTarget},e])}),O){var g=O(_)||{},w=g.rowspan,$=void 0===w?1:w,I=g.colspan,T=void 0===I?1:I;if(!$||!T)return null;h.rowspan=$,h.colspan=T}var C="seq"===t.type||"index"===t.type?"seq":t.type;return k("td",{class:["vxe-footer--column",t.id,(e={},_defineProperty(e,"col--".concat(f),f),_defineProperty(e,"col--".concat(C),C),_defineProperty(e,"col--last",l===W.length-1),_defineProperty(e,"fixed--hidden",s),_defineProperty(e,"col--ellipsis",m),_defineProperty(e,"filter--active",t.filters&&t.filters.some(function(e){return e.checked})),_defineProperty(e,"col--current",M===t),e),_tools.UtilTools.getClass(c,_),_tools.UtilTools.getClass(q,_)],attrs:h,style:A?_xeUtils.default.isFunction(A)?A(_):A:null,on:y,key:n||(F.columnKey?t.id:v)},[k("div",{class:"vxe-cell",style:{width:m?"".concat(r-N,"px"):null}},t.renderFooter(k,_))])}).concat(n?[k("td",{class:["col--gutter"],style:{width:"".concat(n,"px")}})]:[]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,l=this.fixedType,o=t.$refs,r=t.scrollXLoad,n=t.triggerScrollXEvent,i=o.tableHeader,a=i?i.$el:null,c=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft;t.lastScrollTime=Date.now(),a&&(a.scrollLeft=d),c&&(c.scrollLeft=d),r&&n(e),_tools.UtilTools.emitEvent(t,"scroll",[{type:"footer",fixed:l,scrollTop:c.scrollTop,scrollLeft:d,$table:t},e])}}};exports.default=_default;