"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _default={name:"VxeButton",props:{type:String,size:String,name:[String,Number],content:String,status:String,icon:String,disabled:Boolean,loading:Boolean},data:function(){return{showPanel:!1,animatVisible:!1,panelIndex:0,panelStyle:null}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},isText:function(){return"text"===this.type},isFormBtn:function(){return-1<["submit","reset","button"].indexOf(this.type)},btnType:function(){return this.isText?this.type:"button"},btnStatus:function(){return this.status||("primary"===this.type?this.type:null)}},created:function(){"primary"===this.type&&_tools.UtilTools.warn("vxe.error.delProp",["type=primary","status=primary"])},render:function(t){var e,n,i,o=this,s=this.$scopedSlots,a=this.$listeners,r=this.type,l=this.isText,u=this.isFormBtn,d=this.btnStatus,c=this.btnType,p=this.vSize,h=this.name,f=this.disabled,v=this.loading,m=this.showPanel,b=this.animatVisible;return s.dropdowns?t("div",{class:["vxe-button--dropdown",(e={},_defineProperty(e,"size--".concat(p),p),_defineProperty(e,"is--active",m),e)]},[t("button",{class:["vxe-button","type--".concat(c),(n={},_defineProperty(n,"size--".concat(p),p),_defineProperty(n,"theme--".concat(d),d&&!l),_defineProperty(n,"is--disabled",f||v),_defineProperty(n,"is--loading",v),n)],attrs:{name:h,type:u?r:"button",disabled:f||v},on:Object.assign({mouseenter:this.mouseenterEvent,mouseleave:this.mouseleaveEvent},_xeUtils.default.objectMap(a,function(t,e){return function(t){return o.$emit(e,{},t)}}))},this.renderContent(t).concat([t("i",{class:"vxe-button--dropdown-arrow ".concat(_conf.default.icon.dropdownBtn)})])),t("div",{ref:"panel",class:["vxe-button--dropdown-panel",{"animat--leave":b,"animat--enter":m}],style:this.panelStyle},[t("div",{class:"vxe-button--dropdown-wrapper",on:{click:this.clickDropdownEvent,mouseenter:this.mouseenterEvent,mouseleave:this.mouseleaveEvent}},s.dropdowns.call(this))])]):t("button",{class:["vxe-button","type--".concat(c),(i={},_defineProperty(i,"size--".concat(p),p),_defineProperty(i,"theme--".concat(d),d&&!l),_defineProperty(i,"is--disabled",f||v),_defineProperty(i,"is--loading",v),i)],attrs:{name:h,type:u?r:"button",disabled:f||v},on:_xeUtils.default.objectMap(a,function(t,e){return function(t){return o.$emit(e,{},t)}})},this.renderContent(t))},methods:{renderContent:function(t){var e=this.$scopedSlots,n=this.content,i=this.icon,o=[];return this.loading?o.push(t("i",{class:["vxe-button--loading-icon",_conf.default.icon.btnLoading]})):i&&o.push(t("i",{class:["vxe-button--icon",i]})),e.default?o.push(t("span",{class:"vxe-button--content"},e.default.call(this))):n&&o.push(t("span",{class:"vxe-button--content"},[_tools.UtilTools.getFuncText(n)])),o},updateZindex:function(){this.panelIndex<_tools.UtilTools.getLastZIndex()&&(this.panelIndex=_tools.UtilTools.nextZIndex())},clickDropdownEvent:function(t){var e=this,n=t.currentTarget,i=this.$refs.panel,o=_tools.DomTools.getEventTargetNode(t,n,"vxe-button"),s=o.flag,a=o.targetElem;s&&(i.dataset.active="N",this.showPanel=!1,setTimeout(function(){"Y"!==i.dataset.active&&(e.animatVisible=!1)},200),_tools.UtilTools.emitEvent(this,"dropdown-click",[{name:a.getAttribute("name")},t]))},mouseenterEvent:function(){var t=this,e=this.$refs.panel;this.updateZindex(),this.panelStyle={zIndex:this.panelIndex},e.dataset.active="Y",this.animatVisible=!0,setTimeout(function(){"Y"===e.dataset.active&&(t.showPanel=!0)},10)},mouseleaveEvent:function(){var t=this,e=this.$refs.panel;e.dataset.active="N",setTimeout(function(){"Y"!==e.dataset.active&&(t.showPanel=!1,setTimeout(function(){"Y"!==e.dataset.active&&(t.animatVisible=!1)},200))},200)}}};exports.default=_default;