"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vXETable=_interopRequireDefault(require("../../v-x-e-table")),_tools=require("../../tools"),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function renderPrefixIcon(e,t){return e("span",{class:"vxe-form--item-title-prefix"},[e("i",{class:t.icon||_conf.default.icon.formPrefix})])}function renderSuffixIcon(e,t){return e("span",{class:"vxe-form--item-title-suffix"},[e("i",{class:t.icon||_conf.default.icon.formSuffix})])}function renderTitle(e,t){var i=t.title,r=t.titlePrefix,l=t.titleSuffix,n=[];return r&&n.push(r.message?e("vxe-tooltip",{props:{content:_tools.UtilTools.getFuncText(r.message),enterable:r.enterable}},[renderPrefixIcon(e,r)]):renderPrefixIcon(e,r)),n.push(e("span",{class:"vxe-form--item-title-label"},_tools.UtilTools.getFuncText(i))),l&&n.push(l.message?e("vxe-tooltip",{props:{content:_tools.UtilTools.getFuncText(l.message),enterable:l.enterable}},[renderSuffixIcon(e,l)]):renderSuffixIcon(e,l)),n}var _default={name:"VxeFormItem",props:{title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:String,titleWidth:[String,Number],titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},folding:Boolean,collapseNode:Boolean,itemRender:Object},inject:{$vxeform:{default:null}},data:function(){return{showError:!1,showRule:null}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},isRequired:function(){var e=this.$vxeform,t=this.field;if(e&&e.rules){var i=e.rules[t];if(i)return i.some(function(e){return e.required})}return!1},errRule:function(){var e=this.$vxeform,i=this.field;return e?e.invalids.find(function(e){var t=e.property;return i===t}):null}},watch:{errRule:function(e){var t=this;clearTimeout(this.showErrTimeout),this.showError=!1,e?(this.showRule=e.rule,setTimeout(function(){t.showError=!0},30)):this.showErrTimeout=setTimeout(function(){t.showRule=null},350)}},render:function(e){var t=this.$scopedSlots,i=this.$vxeform,r=this.title,l=this.folding,n=this.field,o=this.collapseNode,s=this.itemRender,a=this.isRequired,u=this.showError,f=this.showRule,c=s?_vXETable.default.renderer.get(s.name):null,d=this.span||i.span,m=this.align||i.align,h=this.titleAlign||i.titleAlign,x=this.titleWidth||i.titleWidth,v=i.collapseAll;return e("div",{class:["vxe-form--item",d?"vxe-col--".concat(d," is--span"):null,{"is--title":r,"is--hidden":l&&v,"is--required":a,"is--error":u}]},[e("div",{class:"vxe-form--item-inner"},[r?e("div",{class:["vxe-form--item-title",h?"align--".concat(h):null],style:x?{width:isNaN(x)?x:"".concat(x,"px")}:null},renderTitle(e,this)):null,e("div",{class:["vxe-form--item-content",m?"align--".concat(m):null]},(c&&c.renderItem?c.renderItem.call(this,e,s,{data:i.data,property:n,$form:i},{$form:i}):t.default?t.default.call(this):[]).concat([o?e("div",{class:"vxe-form--item-trigger-node",on:{click:this.toggleCollapseEvent}},[e("span",{class:"vxe-form--item-trigger-text"},v?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),e("i",{class:["vxe-form--item-trigger-icon",v?_conf.default.icon.formFolding:_conf.default.icon.formUnfolding]})]):null,f?e("div",{class:"vxe-form--item-valid",style:f.maxWidth?{width:"".concat(f.maxWidth,"px")}:null},f.message):null]))])])},methods:{toggleCollapseEvent:function(e){this.$vxeform.$emit("toggle-collapse",{data:this.$vxeform.data},e),this.$vxeform.toggleCollapse()}}};exports.default=_default;