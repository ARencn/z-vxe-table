(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d9e09c8"],{"0d4d":function(e,n,t){"use strict";t.r(n);t("b0c0");var a=t("7a23"),r={class:"tip"},o=Object(a["createTextVNode"])("可编辑的合并行"),s=Object(a["createElementVNode"])("br",null,null,-1),d={class:"red"},c=Object(a["createTextVNode"])("（注："),l=Object(a["createTextVNode"])(" ，不能用于树形结构、展开行、固定列，合并的逻辑都是自行实现的，该示例仅供参考）"),i=Object(a["createTextVNode"])("新增"),u=Object(a["createTextVNode"])("删除选中"),m=Object(a["createTextVNode"])("保存"),x={class:"demo-code"},p=Object(a["createTextVNode"])("      "),b=Object(a["createTextVNode"])("\r\n      "),v=Object(a["createTextVNode"])("\r\n    ");function T(e,n,t,T,g,h){var w=Object(a["resolveComponent"])("table-api-link"),f=Object(a["resolveComponent"])("vxe-button"),j=Object(a["resolveComponent"])("vxe-toolbar"),O=Object(a["resolveComponent"])("vxe-column"),V=Object(a["resolveComponent"])("vxe-input"),k=Object(a["resolveComponent"])("vxe-table"),R=Object(a["resolveComponent"])("pre-code");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("p",r,[o,s,Object(a["createElementVNode"])("span",d,[c,Object(a["createVNode"])(w,{prop:"span-method"}),l])]),Object(a["createVNode"])(j,null,{buttons:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(f,{onClick:e.insertEvent},{default:Object(a["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(a["createVNode"])(f,{onClick:n[0]||(n[0]=function(n){return e.$refs.xTable.removeCheckboxRow()})},{default:Object(a["withCtx"])((function(){return[u]})),_:1}),Object(a["createVNode"])(f,{onClick:e.saveEvent},{default:Object(a["withCtx"])((function(){return[m]})),_:1},8,["onClick"])]})),_:1}),Object(a["createVNode"])(k,{border:"","show-overflow":"",ref:"xTable",height:"500","span-method":e.rowspanMethod,data:e.tableData,"edit-rules":e.demo1.validRules,"edit-config":{trigger:"click",mode:"cell"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{type:"checkbox",width:"60"}),Object(a["createVNode"])(O,{field:"role",title:"Role","edit-render":{}},{edit:Object(a["withCtx"])((function(e){var n=e.row;return[Object(a["createVNode"])(V,{modelValue:n.role,"onUpdate:modelValue":function(e){return n.role=e},type:"text",placeholder:"请输入角色"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(a["createVNode"])(O,{field:"name",title:"Name","edit-render":{}},{edit:Object(a["withCtx"])((function(e){var n=e.row;return[Object(a["createVNode"])(V,{modelValue:n.name,"onUpdate:modelValue":function(e){return n.name=e},type:"text",placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(a["createVNode"])(O,{field:"address",title:"Address","edit-render":{}},{edit:Object(a["withCtx"])((function(e){var n=e.row;return[Object(a["createVNode"])(V,{modelValue:n.address,"onUpdate:modelValue":function(e){return n.address=e},type:"text",placeholder:"请输入地址"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["span-method","data","edit-rules"]),Object(a["createElementVNode"])("p",x,Object(a["toDisplayString"])(e.$t("app.body.button.showCode")),1),Object(a["createElementVNode"])("pre",null,[p,Object(a["createVNode"])(R,{class:"xml"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.demoCodes[0]),1)]})),_:1}),b,Object(a["createVNode"])(R,{class:"javascript"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.demoCodes[1]),1)]})),_:1}),v])])}var g=t("1da1"),h=(t("caad"),t("96cf"),t("55db")),w=Object(a["defineComponent"])({setup:function(){var e=Object(a["ref"])({}),n=Object(a["ref"])([{id:10001,name:"Test1",nickname:"T1",role:"Designer",sex:"0",sex2:["0"],num1:40,age:28,address:"Shenzhen",date12:"",date13:""},{id:10002,name:"Test2",nickname:"T2",role:"Designer",sex:"1",sex2:["0","1"],num1:20,age:22,address:"Guangzhou",date12:"",date13:"2020-08-20"},{id:10003,name:"Test3",nickname:"T3",role:"Test",sex:"0",sex2:["1"],num1:200,age:32,address:"Shanghai",date12:"2020-09-10",date13:""},{id:10004,name:"Test4",nickname:"T4",role:"Designer",sex:"1",sex2:["0"],num1:30,age:23,address:"Shenzhen",date12:"",date13:"2020-12-04"},{id:10005,name:"Test5",nickname:"T5",role:"Test",sex:"1",sex2:["1"],num1:18,age:26,address:"Shenzhen",date12:"",date13:""},{id:10006,name:"Test6",nickname:"T6",role:"Test",sex:"1",sex2:["1"],num1:35,age:28,address:"BeiJing",date12:"",date13:"2020-09-04"},{id:10007,name:"Test7",nickname:"T7",role:"Test",sex:"1",sex2:["1"],num1:11,age:24,address:"BeiJing",date12:"2020-08-10",date13:"2020-04-22"},{id:10008,name:"Test8",nickname:"T8",role:"Develop",sex:"0",sex2:["1"],num1:30,age:21,address:"Shenzhen",date12:"",date13:""},{id:10009,name:"Test9",nickname:"T9",role:"Develop",sex:"1",sex2:["0"],num1:25,age:31,address:"Guangzhou",date12:"",date13:"2020-04-10"},{id:100010,name:"Test10",nickname:"T10",role:"Develop",sex:"1",sex2:["1"],num1:30,age:29,address:"BeiJing",date12:"2020-04-18",date13:"2020-04-10"},{id:100011,name:"Test11",nickname:"T11",role:"Test",sex:"0",sex2:["1"],num1:33,age:30,address:"Shenzhen",date12:"",date13:""},{id:100012,name:"Test12",nickname:"T12",role:"Designer",sex:"1",sex2:["1"],num1:22,age:20,address:"Guangzhou",date12:"",date13:"2020-04-11"},{id:100013,name:"Test13",nickname:"T13",role:"Designer",sex:"1",sex2:["1"],num1:19,age:34,address:"BeiJing",date12:"",date13:"2020-01-10"}]),t=Object(a["reactive"])({validRules:{role:[{required:!0,message:"角色值必须填写"}],name:[{required:!0,message:"名称必须填写"}],address:[{required:!0,message:"地址必须填写"}]}}),r=function(){var n=Object(g["a"])(regeneratorRuntime.mark((function n(){var t,a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.value,a={},n.next=4,t.insert(a);case 4:r=n.sent,o=r.row,t.setActiveCell(o,"role");case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o=function(){var n=Object(g["a"])(regeneratorRuntime.mark((function n(){var t,a,r,o,s,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.value,a=t.getRecordset(),r=a.insertRecords,o=a.removeRecords,s=a.updateRecords,!(r.length||o.length||s.length)){n.next=10;break}return n.next=6,t.validate();case 6:d=n.sent,d?h["a"].modal.message({status:"error",content:"校验不通过！"}):h["a"].modal.message({content:"保存成功！",status:"success"}),n.next=11;break;case 10:h["a"].modal.message({content:"数据未改动！",status:"warning"});case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s=function(e){var n=e.row,t=e._rowIndex,a=e.column,r=e.visibleData,o=["role"],s=n[a.property];if(s&&o.includes(a.property)){var d=r[t-1],c=r[t+1];if(d&&d[a.property]===s)return{rowspan:0,colspan:0};var l=1;while(c&&c[a.property]===s)c=r[++l+t];if(l>1)return{rowspan:l,colspan:1}}};return{demo1:t,xTable:e,tableData:n,insertEvent:r,saveEvent:o,rowspanMethod:s,demoCodes:['\n        <vxe-toolbar>\n          <template #buttons>\n            <vxe-button @click="insertEvent">新增</vxe-button>\n            <vxe-button @click="$refs.xTable.removeCheckboxRow()">删除选中</vxe-button>\n            <vxe-button @click="saveEvent">保存</vxe-button>\n          </template>\n        </vxe-toolbar>\n\n        <vxe-table\n          border\n          show-overflow\n          ref="xTable"\n          height="500"\n          :span-method="rowspanMethod"\n          :data="tableData"\n          :edit-rules="demo1.validRules"\n          :edit-config="{trigger: \'click\', mode: \'cell\'}">\n          <vxe-column type="checkbox" width="60"></vxe-column>\n          <vxe-column field="role" title="Role" :edit-render="{}">\n            <template #edit="{ row }">\n              <vxe-input v-model="row.role" type="text" placeholder="请输入角色"></vxe-input>\n            </template>\n          </vxe-column>\n          <vxe-column field="name" title="Name" :edit-render="{}">\n            <template #edit="{ row }">\n              <vxe-input v-model="row.name" type="text" placeholder="请输入名称"></vxe-input>\n            </template>\n          </vxe-column>\n          <vxe-column field="address" title="Address" :edit-render="{}">\n            <template #edit="{ row }">\n              <vxe-input v-model="row.address" type="text" placeholder="请输入地址"></vxe-input>\n            </template>\n          </vxe-column>\n        </vxe-table>\n        ',"\n        import { defineComponent, reactive, ref } from 'vue'\n        import { VXETable, VxeTableInstance, VxeTablePropTypes } from 'vxe-table'\n\n        export default defineComponent({\n          setup () {\n            const xTable = ref({} as VxeTableInstance)\n\n            const tableData = ref([\n              { id: 10001, name: 'Test1', nickname: 'T1', role: 'Designer', sex: '0', sex2: ['0'], num1: 40, age: 28, address: 'Shenzhen', date12: '', date13: '' },\n              { id: 10002, name: 'Test2', nickname: 'T2', role: 'Designer', sex: '1', sex2: ['0', '1'], num1: 20, age: 22, address: 'Guangzhou', date12: '', date13: '2020-08-20' },\n              { id: 10003, name: 'Test3', nickname: 'T3', role: 'Test', sex: '0', sex2: ['1'], num1: 200, age: 32, address: 'Shanghai', date12: '2020-09-10', date13: '' },\n              { id: 10004, name: 'Test4', nickname: 'T4', role: 'Designer', sex: '1', sex2: ['0'], num1: 30, age: 23, address: 'Shenzhen', date12: '', date13: '2020-12-04' },\n              { id: 10005, name: 'Test5', nickname: 'T5', role: 'Test', sex: '1', sex2: ['1'], num1: 18, age: 26, address: 'Shenzhen', date12: '', date13: '' },\n              { id: 10006, name: 'Test6', nickname: 'T6', role: 'Test', sex: '1', sex2: ['1'], num1: 35, age: 28, address: 'BeiJing', date12: '', date13: '2020-09-04' },\n              { id: 10007, name: 'Test7', nickname: 'T7', role: 'Test', sex: '1', sex2: ['1'], num1: 11, age: 24, address: 'BeiJing', date12: '2020-08-10', date13: '2020-04-22' },\n              { id: 10008, name: 'Test8', nickname: 'T8', role: 'Develop', sex: '0', sex2: ['1'], num1: 30, age: 21, address: 'Shenzhen', date12: '', date13: '' },\n              { id: 10009, name: 'Test9', nickname: 'T9', role: 'Develop', sex: '1', sex2: ['0'], num1: 25, age: 31, address: 'Guangzhou', date12: '', date13: '2020-04-10' },\n              { id: 100010, name: 'Test10', nickname: 'T10', role: 'Develop', sex: '1', sex2: ['1'], num1: 30, age: 29, address: 'BeiJing', date12: '2020-04-18', date13: '2020-04-10' },\n              { id: 100011, name: 'Test11', nickname: 'T11', role: 'Test', sex: '0', sex2: ['1'], num1: 33, age: 30, address: 'Shenzhen', date12: '', date13: '' },\n              { id: 100012, name: 'Test12', nickname: 'T12', role: 'Designer', sex: '1', sex2: ['1'], num1: 22, age: 20, address: 'Guangzhou', date12: '', date13: '2020-04-11' },\n              { id: 100013, name: 'Test13', nickname: 'T13', role: 'Designer', sex: '1', sex2: ['1'], num1: 19, age: 34, address: 'BeiJing', date12: '', date13: '2020-01-10' }\n            ])\n\n            const demo1 = reactive({\n              validRules: {\n                role: [\n                  { required: true, message: '角色值必须填写' }\n                ],\n                name: [\n                  { required: true, message: '名称必须填写' }\n                ],\n                address: [\n                  { required: true, message: '地址必须填写' }\n                ]\n              }\n            })\n\n            const insertEvent = async () => {\n              const $table = xTable.value\n              const record = {}\n              const { row: newRow } = await $table.insert(record)\n              $table.setActiveCell(newRow, 'role')\n            }\n\n            const saveEvent = async () => {\n              const $table = xTable.value\n              const body = $table.getRecordset()\n              const { insertRecords, removeRecords, updateRecords } = body\n              if (insertRecords.length || removeRecords.length || updateRecords.length) {\n                const errMap = await $table.validate()\n                if (errMap) {\n                  VXETable.modal.message({ status: 'error', content: '校验不通过！' })\n                } else {\n                  VXETable.modal.message({ content: '保存成功！', status: 'success' })\n                }\n              } else {\n                VXETable.modal.message({ content: '数据未改动！', status: 'warning' })\n              }\n            }\n\n            // 通用行合并函数（将相同多列数据合并为一行）\n            const rowspanMethod: VxeTablePropTypes.SpanMethod = ({ row, _rowIndex, column, visibleData }) => {\n              const fields = ['role']\n              const cellValue = row[column.property]\n              if (cellValue && fields.includes(column.property)) {\n                const prevRow = visibleData[_rowIndex - 1]\n                let nextRow = visibleData[_rowIndex + 1]\n                if (prevRow && prevRow[column.property] === cellValue) {\n                  return { rowspan: 0, colspan: 0 }\n                } else {\n                  let countRowspan = 1\n                  while (nextRow && nextRow[column.property] === cellValue) {\n                    nextRow = visibleData[++countRowspan + _rowIndex]\n                  }\n                  if (countRowspan > 1) {\n                    return { rowspan: countRowspan, colspan: 1 }\n                  }\n                }\n              }\n            }\n\n            return {\n              demo1,\n              xTable,\n              tableData,\n              insertEvent,\n              saveEvent,\n              rowspanMethod\n            }\n          }\n        })\n        "]}}}),f=t("6b0d"),j=t.n(f);const O=j()(w,[["render",T]]);n["default"]=O},"1da1":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t("d3b7");function a(e,n,t,a,r,o,s){try{var d=e[o](s),c=d.value}catch(l){return void t(l)}d.done?n(c):Promise.resolve(c).then(a,r)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var s=e.apply(n,t);function d(e){a(s,r,o,d,c,"next",e)}function c(e){a(s,r,o,d,c,"throw",e)}d(void 0)}))}}}}]);