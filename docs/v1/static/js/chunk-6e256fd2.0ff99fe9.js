(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e256fd2"],{3265:function(e,n,l){"use strict";l("4c78")},"4c78":function(e,n,l){},"714c":function(e,n,l){"use strict";l.r(n);var t=function(){var e=this,n=e.$createElement,l=e._self._c||n;return l("div",[l("p",{staticClass:"tip"},[l("table-api-link",{attrs:{name:"vxe-table"}}),e._v(" 方式：使用 "),l("a",{staticClass:"link",attrs:{href:"https://www.npmjs.com/package/sortablejs",target:"_blank"}},[e._v("sortablejs")]),e._v(" 实现列移动，由于直接操作了 Dom 节点，需要与 Vue 的数据同步，必须设置 "),l("table-api-link",{attrs:{prop:"column-key"}}),l("br"),l("span",{staticClass:"red"},[e._v("（注：该示例仅供参考，具体逻辑请自行实现）")])],1),l("vxe-table",{ref:"xTable1",staticClass:"sortable-column-demo",attrs:{border:"","column-key":"",data:e.tableData}},[l("vxe-table-column",{attrs:{field:"name",title:"Name"}}),l("vxe-table-column",{attrs:{field:"sex",title:"Sex",width:"150"}}),l("vxe-table-column",{attrs:{field:"age",title:"Age",width:"250"}}),l("vxe-table-column",{attrs:{field:"address",title:"Address","show-overflow":""}})],1),l("p",{staticClass:"demo-code"},[e._v(e._s(e.$t("app.body.button.showCode")))]),l("pre",[e._v("    "),l("code",{staticClass:"xml"},[e._v(e._s(e.demoCodes[0]))]),e._v("\n    "),l("code",{staticClass:"javascript"},[e._v(e._s(e.demoCodes[1]))]),e._v("\n    "),l("code",{staticClass:"css"},[e._v(e._s(e.demoCodes[2]))]),e._v("\n  ")]),l("p",{staticClass:"tip"},[l("grid-api-link",{attrs:{name:"vxe-grid"}}),e._v(" 方式，更加简单的配置式调用"),l("br"),l("span",{staticClass:"red"},[e._v("（注：该示例仅供参考，具体逻辑请自行实现，例如：固定列是无法拖动等...）")])],1),l("vxe-grid",{ref:"xTable2",staticClass:"sortable-column-demo",attrs:{border:"","column-key":"","show-footer":"","footer-method":e.footerMethod,toolbar:e.toolbar,columns:e.tableColumn,data:e.tableData}}),l("p",{staticClass:"demo-code"},[e._v(e._s(e.$t("app.body.button.showCode")))]),l("pre",[e._v("    "),l("code",{staticClass:"xml"},[e._v(e._s(e.demoCodes[3]))]),e._v("\n    "),l("code",{staticClass:"javascript"},[e._v(e._s(e.demoCodes[4]))]),e._v("\n    "),l("code",{staticClass:"css"},[e._v(e._s(e.demoCodes[5]))]),e._v("\n  ")])],1)},o=[],a=(l("fb6a"),l("d3b7"),l("159b"),l("a630"),l("3ca3"),l("d81d"),l("caad"),l("c7cd"),l("a434"),l("1487")),r=l.n(a),d=l("c695"),s=l.n(d),i=l("aa47"),m={data:function(){return{tableColumn:[{field:"name",title:"Name",fixed:"left",minWidth:200},{field:"role",title:"Role",minWidth:220},{field:"sex",title:"Sex",minWidth:100},{field:"age",title:"Age",minWidth:150},{field:"date3",title:"Date",minWidth:200},{field:"address",title:"Address",minWidth:200,showOverflow:!0}],toolbar:{custom:!0},tableData:[],demoCodes:['\n        <vxe-table\n          border\n          column-key\n          ref="xTable"\n          class="sortable-column-demo"\n          :data="tableData">\n          <vxe-table-column field="name" title="Name"></vxe-table-column>\n          <vxe-table-column field="sex" title="Sex" width="150"></vxe-table-column>\n          <vxe-table-column field="age" title="Age" width="250"></vxe-table-column>\n          <vxe-table-column field="address" title="Address" show-overflow></vxe-table-column>\n        </vxe-table>\n        ',"\n        export default {\n          data () {\n            return {\n              tableData: []\n            }\n          },\n          created () {\n            this.tableData = window.MOCK_DATA_LIST.slice(0, 6)\n          },\n          beforeDestroy () {\n            if (this.sortable) {\n              this.sortable.destroy()\n            }\n          },\n          methods: {\n            columnDrop () {\n              this.$nextTick(() => {\n              let xTable = this.$refs.xTable\n              this.sortable = Sortable.create(xTable.$el.querySelector('.body--wrapper>.vxe-table--header .vxe-header--row'), {\n                handle: '.vxe-header--column:not(.col--fixed)',\n                onEnd: ({ item, newIndex, oldIndex }) => {\n                  let { fullColumn, tableColumn } = xTable.getTableColumn()\n                  let targetThElem = item\n                  let wrapperElem = targetThElem.parentNode\n                  let newColumn = fullColumn[newIndex]\n                  if (newColumn.fixed) {\n                    // 错误的移动\n                    if (newIndex > oldIndex) {\n                      wrapperElem.insertBefore(targetThElem, wrapperElem.children[oldIndex])\n                    } else {\n                      wrapperElem.insertBefore(wrapperElem.children[oldIndex], targetThElem)\n                    }\n                    return this.$XModal.message({ message: '固定列不允许拖动！', status: 'error' })\n                  }\n                  // 转换真实索引\n                  let oldColumnIndex = xTable.getColumnIndex(tableColumn[oldIndex])\n                  let newColumnIndex = xTable.getColumnIndex(tableColumn[newIndex])\n                  // 移动到目标列\n                  let currRow = fullColumn.splice(oldColumnIndex, 1)[0]\n                  fullColumn.splice(newColumnIndex, 0, currRow)\n                  xTable.loadColumn(fullColumn)\n                }\n              })\n            })\n            }\n          }\n        }\n        ","\n        .sortable-column-demo .vxe-header--row .vxe-header--column.sortable-ghost,\n        .sortable-column-demo .vxe-header--row .vxe-header--column.sortable-chosen {\n          background-color: #dfecfb;\n        }\n        ",'\n        <vxe-grid\n          border\n          column-key\n          show-footer\n          ref="xTable"\n          class="sortable-column-demo"\n          :footer-method="footerMethod"\n          :toolbar="toolbar"\n          :columns="tableColumn"\n          :data="tableData"></vxe-grid>\n        ',"\n        export default {\n          data () {\n            return {\n              tableColumn: [\n                { field: 'name', title: 'Name', fixed: 'left', minWidth: 200 },\n                { field: 'role', title: 'Role', minWidth: 220 },\n                { field: 'sex', title: 'Sex', minWidth: 100 },\n                { field: 'age', title: 'Age', minWidth: 150 },\n                { field: 'date3', title: 'Date', minWidth: 200 },\n                { field: 'address', title: 'Address', minWidth: 200, showOverflow: true }\n              ],\n              toolbar: {\n                custom: true\n              },\n              tableData: []\n            }\n          },\n          created () {\n            this.tableData = window.MOCK_DATA_LIST.slice(0, 6)\n          },\n          beforeDestroy () {\n            if (this.sortable) {\n              this.sortable.destroy()\n            }\n          },\n          methods: {\n            footerMethod ({ columns, data }) {\n              return [\n                columns.map((column, columnIndex) => {\n                  if (columnIndex === 0) {\n                    return '平均'\n                  }\n                  if (['age', 'sex'].includes(column.property)) {\n                    return XEUtils.mean(data, column.property)\n                  }\n                  return null\n                }),\n                columns.map((column, columnIndex) => {\n                  if (columnIndex === 0) {\n                    return '和值'\n                  }\n                  if (['age', 'sex'].includes(column.property)) {\n                    return XEUtils.sum(data, column.property)\n                  }\n                  return null\n                })\n              ]\n            },\n            columnDrop () {\n              this.$nextTick(() => {\n              let xTable = this.$refs.xTable\n              this.sortable = Sortable.create(xTable.$el.querySelector('.body--wrapper>.vxe-table--header .vxe-header--row'), {\n                handle: '.vxe-header--column:not(.col--fixed)',\n                onEnd: ({ item, newIndex, oldIndex }) => {\n                  let { fullColumn, tableColumn } = xTable.getTableColumn()\n                  let targetThElem = item\n                  let wrapperElem = targetThElem.parentNode\n                  let newColumn = fullColumn[newIndex]\n                  if (newColumn.fixed) {\n                    // 错误的移动\n                    if (newIndex > oldIndex) {\n                      wrapperElem.insertBefore(targetThElem, wrapperElem.children[oldIndex])\n                    } else {\n                      wrapperElem.insertBefore(wrapperElem.children[oldIndex], targetThElem)\n                    }\n                    return this.$XModal.message({ message: '固定列不允许拖动！', status: 'error' })\n                  }\n                  // 转换真实索引\n                  let oldColumnIndex = xTable.getColumnIndex(tableColumn[oldIndex])\n                  let newColumnIndex = xTable.getColumnIndex(tableColumn[newIndex])\n                  // 移动到目标列\n                  let currRow = fullColumn.splice(oldColumnIndex, 1)[0]\n                  fullColumn.splice(newColumnIndex, 0, currRow)\n                  xTable.loadColumn(fullColumn)\n                }\n              })\n            })\n            }\n          }\n        }\n        ","\n        .sortable-column-demo .vxe-header--row .vxe-header--column.sortable-ghost,\n        .sortable-column-demo .vxe-header--row .vxe-header--column.sortable-chosen {\n          background-color: #dfecfb;\n        }\n        .sortable-column-demo .vxe-header--row .vxe-header--column.col--fixed {\n          cursor: no-drop;\n        }\n        "]}},created:function(){this.tableData=window.MOCK_DATA_LIST.slice(0,6),this.columnDrop1(),this.columnDrop2()},mounted:function(){Array.from(this.$el.querySelectorAll("pre code")).forEach((function(e){r.a.highlightBlock(e)}))},beforeDestroy:function(){this.sortable1&&this.sortable1.destroy(),this.sortable2&&this.sortable2.destroy()},methods:{footerMethod:function(e){var n=e.columns,l=e.data;return[n.map((function(e,n){return 0===n?"平均":["age","sex"].includes(e.property)?s.a.mean(l,e.property):null})),n.map((function(e,n){return 0===n?"和值":["age","sex"].includes(e.property)?s.a.sum(l,e.property):null}))]},columnDrop1:function(){var e=this;this.$nextTick((function(){var n=e.$refs.xTable1;e.sortable1=i["a"].create(n.$el.querySelector(".body--wrapper>.vxe-table--header .vxe-header--row"),{handle:".vxe-header--column:not(.col--fixed)",onEnd:function(l){var t=l.item,o=l.newIndex,a=l.oldIndex,r=n.getTableColumn(),d=r.fullColumn,s=r.tableColumn,i=t,m=i.parentNode,u=d[o];if(u.fixed)return o>a?m.insertBefore(i,m.children[a]):m.insertBefore(m.children[a],i),e.$XModal.message({message:"固定列不允许拖动！",status:"error"});var c=n.getColumnIndex(s[a]),x=n.getColumnIndex(s[o]),b=d.splice(c,1)[0];d.splice(x,0,b),n.loadColumn(d)}})}))},columnDrop2:function(){var e=this;this.$nextTick((function(){var n=e.$refs.xTable2;e.sortable2=i["a"].create(n.$el.querySelector(".body--wrapper>.vxe-table--header .vxe-header--row"),{handle:".vxe-header--column:not(.col--fixed)",onEnd:function(l){var t=l.item,o=l.newIndex,a=l.oldIndex,r=n.getTableColumn(),d=r.fullColumn,s=r.tableColumn,i=t,m=i.parentNode,u=d[o];if(u.fixed)return o>a?m.insertBefore(i,m.children[a]):m.insertBefore(m.children[a],i),e.$XModal.message({message:"固定列不允许拖动！",status:"error"});var c=n.getColumnIndex(s[a]),x=n.getColumnIndex(s[o]),b=d.splice(c,1)[0];d.splice(x,0,b),n.loadColumn(d)}})}))}}},u=m,c=(l("3265"),l("2877")),x=Object(c["a"])(u,t,o,!1,null,null,null);n["default"]=x.exports}}]);